# yaml-language-server: $schema=https://raw.githubusercontent.com/nf-core/modules/master/subworkflows/yaml-schema.json
name: "fastqfastagfa_assemblyextension_fasta"
description: Extend assemblies.
keywords:
  - extend
  - assembly
  - contig
  - cobra
  - graph
  - phables
components:
  - fastqfasta_cobra_fasta
  - fastqgfa_phables_fasta

input:
  - run_cobra:
      type: boolean
      description: |
        Boolean to determine if cobra should be run on the assemblies.
  - fastq_gz:
      type: file
      description: |
        Input channel containing FastQ files
        Structure: [ [ meta.id, meta.single_end ], [ reads_1.fastq.gz, reads_2.fastq.gz ] ]
      pattern: "*.{fastq,fq,fastq.gz,fq.gz}"
  - fasta_gz:
      type: file
      description: |
        Input channel containing FastA files
        Structure: [ [ meta.id, meta.single_end, meta.assembler], path(fasta.gz) ]
      pattern: "*.{fasta,fa,fna,fasta.gz,fna.gz,fasta.gz}"
  - assembly_logs:
      type: file
      description: |
        Input channel containing the assembly logs to be used for determining min/maxk for cobra
        Structure: [ [ meta.id, meta.single_end, meta.assembler ], path(assembler.log) ]
      pattern: "*.log"
  - query_contigs_tsv:
      type: file
      description: |
        Input channel containing query contigs to be extended in TSV format
        Structure: [ [ meta.id, meta.single_end, meta.assembler ], path(query.tsv) ]
      pattern: "*.{fasta,fa,fna,fasta.gz,fna.gz,fasta.gz}"
  - run_phables:
      type: boolean
      description: |
        Boolean to determine if phables should be run on the assemblies.
  - gfa_gz:
      type: file
      description: "Assembly graph in GFA format"
      pattern: "*.{gfa, gfa.gz}"
  - phables_config:
      type: file
      description: "Template Phables config file to identify database location"
      pattern: "phables_config.yml"
  - phables_db:
      type: directory
      description: PHROG and SMG files for unitig alignment.
      pattern: "*phables_db/"

output:
  - fasta_gz:
      type: file
      description: |
        Channel containing extended assemblies in FastA format.
        Structure: [ val(meta), path(fasta.gz) ]
      pattern: "*.fasta.gz"
  - versions:
      type: file
      description: |
        File containing software versions
        Structure: [ path(versions.yml) ]
      pattern: "versions.yml"

authors:
  - "@CarsonJM"
maintainers:
  - "@CarsonJM"
