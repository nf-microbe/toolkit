/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for running minimal tests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines input files and everything required to run a minimal pipeline test.

    Use as follows:
        nextflow run nf-microbe/toolkit -profile test_nothing,<docker/singularity> --outdir <OUTDIR>

----------------------------------------------------------------------------------------
*/
params {
    // Pipeline options
    publish_dir_mode        = 'symlink'

    config_profile_name        = 'Minimal test profile'
    config_profile_description = 'Minimal dataset to check pipeline function'

    // PIPELINE OPTIONS
    // Input/output
    input                       = "${projectDir}/assets/test-datasets/samplesheets/test_fastq_samplesheet.csv"
    fastqs                      = null
    fastas                      = null
    sra_accessions              = "${projectDir}/assets/test-datasets/samplesheets/test_sra.csv"
    outdir                      = "${projectDir}/results"
    // Cleanup
    remove_intermediate_files   = true
    // READ DOWNLOAD OPTIONS
    download_sra_fastqs         = true
    // READ PREPROCESSING OPTIONS
    // Read trimming/QC
    run_fastp                   = true
    fastp_args                  = null
    save_preprocessed_fastq     = true
    // Read runmerging
    perform_run_merging         = true
    save_run_merged_fastq       = true
    // Host read removal
    run_bowtie2_host_removal    = true
    bowtie2_host_removal_args   = null
    genome                      = 'EB2'
    igenomes_base               = 's3://ngi-igenomes/igenomes/'
    igenomes_ignore             = false
    host_fasta                  = null
    host_bowtie2_index          = null
    // LOGAN MULTIPLIED DOWNLOAD OPTIONS
    download_logan_mult_contigs = true
    download_logan_mult_unitigs = true
    logan_mult_min_abund        = 10
    // ASSEMBLY DOWNLOAD OPTIONS
    download_logan_contigs      = true
    // READ ASSEMBLY OPTIONS
    run_megahit_single          = true
    run_megahit_coassembly      = true
    megahit_args                = null
    run_spades_single           = true
    run_spades_coassembly       = true
    spades_args                 = "--meta --only-assembler"
    use_spades_scaffolds        = true
    run_penguin_single          = true
    run_penguin_coassembly      = true
    penguin_args                = "--min-contig-len 100"
    // ASSEMBLY EXTENSION OPTIONS
    run_cobra                   = true
    cobra_min_len               = 1000
    cobra_coverm_args           = null
    cobra_args                  = null
    run_phables                 = false
    phables_db                  = null
    phables_args                = null
    // ASSEMBLY QC OPTIONS
    assembly_min_len            = 1500
    save_filtered_fasta         = true
    run_seqkit_stats            = true
    run_trfinder                = true
    trfinder_args               = null
    use_trfinder_fasta          = true
    run_tantan                  = true
    tantan_args                 = "-s 0.9"
    pyrodigalgv_args            = null
    run_nucleotide_stats        = true
    // MGE CLASSIFICATION OPTIONS
    run_genomad                 = false
    genomad_db                  = null
    genomad_args                = "--splits 5 --relaxed --sensitivity 0.1"
    run_pyhmmer_virus           = true
    run_pyhmmer_plasmid         = true
    run_pyhmmer_busco           = true
    // VIRUS QC OPTIONS
    run_checkv                  = false
    checkv_db                   = null
    checkv_args                 = null
    run_genbank_hits            = false
}

// Load modules.config for DSL2 module specific options
includeConfig '../workflows/toolkit/nextflow.config'
